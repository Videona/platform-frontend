<topbar></topbar>

<div ng-controller="VideoDetailController as Video" class="video-page">

	<!-- Screen loading directive -->
	<div ng-if="!Video.video.data && Video.loading" class="loading">
		<loading></loading>
	</div>

	<error404 ng-if="Video.video.data.error && !Video.loading" ></error404>

	<article ng-if="Video.video.data && !Video.video.data.error">
		<section class="card-video-detail">
			<div>
				<player video="Video.video.data.video" poster="Video.video.data.poster"></player>

				<!-- Only if desktop >>> -->
				<user-card class="card-user-info-desktop" user="Video.user.data"></user-card>
				<!--" <<<<<<< -->
			</div>
			<section class="card-video-info">
				<div>
					<h1>
						{{ ::Video.video.data.title }}
						<md-icon ng-if="Video.video.data.verified == true || Video.video.data.verified == 'true'">
							<md-tooltip md-delay="1000">{{ 'VIDEO_VERIFIED' | translate }}</md-tooltip>
							check_circle
						</md-icon>
						<md-icon ng-if="Video.video.data.featured == true || Video.video.data.featured == 'true'">
							<md-tooltip md-delay="1000">{{ 'VIDEO_FEATURED' | translate }}</md-tooltip>
							star
						</md-icon>
					</h1>
				</div>
				
				<div class="padding">
					{{'UPLOADED_AT' | translate}} {{Video.video.data.date | localeDate}}
				</div>
				
				<div class="padding">
					<p ng-class="{'block-ellipsis': !readMore}" ng-bind="Video.video.data.description" id="video-description"></p>
					
					<div class="padding" ng-show="Video.showMore">
						<a ng-click="readMore = !readMore" class="read-more">
							<span ng-hide="readMore">+ {{'BUTTON_READ_ALL' | translate}}</span>
							<span ng-show="readMore">- {{'BUTTON_READ_LESS' | translate}}</span>
						</a>
					</div>
					
					<div class="video-detail-show-info" ng-click="showDetails = !showDetails" ng-init="showDetails = true">
						<span ng-show="showDetails">{{'HIDE_VIDEO_DETAILS' | translate}}</span>
						<span ng-hide="showDetails">{{'SHOW_VIDEO_DETAILS' | translate}}</span>
						<i ng-show="showDetails" class="material-icons">keyboard_arrow_up</i>
						<i ng-hide="showDetails" class="material-icons">keyboard_arrow_down</i>
					</div> 

					<div class="video-detail-info" ng-show="showDetails">
						<p>
							<strong>{{'VIDEO_DETAIL_DATETIME' | translate}}:</strong> {{Video.video.data.date | date: 'dd/MM/yyyy HH:mm' || '-'}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_CATEGORIES' | translate}}:</strong> {{Video.video.data.categories | commaSeparated:'-'}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_PRODUCT_TYPE' | translate}}:</strong> {{Video.video.data.productType | productType}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_LENGTH' | translate}}:</strong> {{Video.video.data.length | time}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_LANGUAGE' | translate}}:</strong> {{Video.video.data.language || '-'}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_QUALITY' | translate}}:</strong>
							{{Video.video.data.quality || '-'}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_CREDIBILITY' | translate}}:</strong> {{Video.video.data.credibility || '-'}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_TECHNICAL_DETAILS' | translate}}:</strong> {{Video.video.data.size | toMB }} MB | {{Video.video.data.format}} | {{Video.video.data.dimensions}} | {{Video.video.data.ratio}}
						</p>
						<p>
							<strong>{{'VIDEO_DETAIL_TAGS' | translate}}:</strong> {{Video.video.data.tag | commaSeparated:'-'}}
						</p>
					</div>
				</div>
				<section class="navigate"><!--TODO: is there a class for button only??-->
					<md-button class="button md-raised md-primary" ui-sref="videoDownload({id: Video.video.data._id})">
						<span>{{'DOWNLOAD_VIDEO' | translate}}</span>
					</md-button>
					<md-button class="button md-raised" ng-if="Video.session.id == Video.video.data.owner" ui-sref="videoDetailEdit({id: Video.video.data._id})">
						<md-icon>edit</md-icon>
						<span>{{'BUTTON_EDIT' | translate}}</span>
					</md-button>
				</section>
			</section>
		</section>

		<user-card class="card-user-info" user="Video.user.data"></user-card>
		<div>&nbsp;</div>
		
	</article>
	
</div>