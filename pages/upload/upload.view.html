<topbar></topbar>

<div ng-controller="UploadController as Upload" class="upload-page">
	<div class="container">
		<div class="left-preview">
			<div class="upload-form-file" ng-if="!Upload.file">
			    <div ngf-drop ngf-select ng-model="Upload.file" class="drop-box panoramic"
			        ngf-drag-over-class="'dragover'" ngf-multiple="false" ngf-allow-dir="false"
			        accept="video/*" 
			        ngf-pattern="'video/*'">
					<md-icon class="upload-drop-icon">file_upload</md-icon><br>
			    	{{'DROP_VIDEO' | translate}}
			    </div>
			    <div ngf-no-file-drop>
					<input type="file" accept="video/*" file-model="Upload.file"/>
			    </div>
			</div>
		    
			<video ng-if="Upload.file" class="upload-form-preview" controls ngf-src="Upload.file"></video> 
		</div>

		<div class="right-form">
			<input type="text" name="title" class="upload-form-title" ng-model="Upload.data.title" placeholder="{{'UPLOAD_TITLE_PLACEHOLDER' | translate}}" />
			<textarea rows="10" name="description" class="upload-form-description" ng-model="Upload.data.description" placeholder="{{'UPLOAD_DESCRIPTION_PLACEHOLDER' | translate}}"></textarea>

			<div class="product-types">
				<span ng-repeat="type in Upload.productTypes" class="product-type">
					<input type="checkbox" name="product-type-{{type.id}}" ng-model="Upload.data.productType[type.id]" id="product-type-{{type.id}}">
					<label for="product-type-{{type.id}}">{{type.name}}</label>
				</span>

			</div>

			<div ng-if="Upload.error" class="upload-error">
				{{Upload.error}}
			</div>

			<div class="form-send-button">
				<md-button ng-disabed="Upload.loading" class="spinner-button md-raised md-primary cta" ng-click="Upload.send()">
					<md-progress-circular ng-show="Upload.loading" class="md-hue-3 md-inline" md-diameter="20px"></md-progress-circular>
					<span ng-hide="Upload.loading">{{'UPLOAD_SEND' | translate}}</span>
					<span ng-show="Upload.loading">
						{{'UPLOAD_UPLOADING' | translate}} 
						<span ng-show="Upload.progress">
							{{ Upload.progress.loaded * 100 / Upload.progress.total | number:0 }}%
						</span>
					</span>
				</md-button>
				<div ng-if="Upload.progress" class="upload-progress">
					<md-progress-linear md-mode="determinate" value="{{Upload.progress.loaded * 100 / Upload.progress.total}}"></md-progress-linear>
				</div>
			</div>
		</div>
	</div>
</div>
